// ===================
// ==== ADVANCED =====
// ===================

stringToBinary = name => {
  let base = "00000000";
  let output = "";
  for (var i = 0; i < name.length; i++) {
    let toBinary = name[i].charCodeAt().toString(2);
    output += `${base.slice(String(toBinary).length) + toBinary} `;
  }
  return output;
};

// ===================
// === TESTS BELOW ===
// ==== DONT EDIT ====
// ===================

var TestBlock = [
  {
    binary:
      "01010010 01100101 01100001 01101100 00100000 01110000 01110010 01101111 01100111 01110010 01100001 01101101 01110011 00100000 01100100 01101111 01101110 00100111 01110100 00100000 01100101 01100001 01110100 00100000 01100011 01100001 01100011 01101000 01100101 00101110",
    text: "Real programs don't eat cache."
  },
  {
    binary:
      "010011010110111101110011011101  0000100000011100000111010101100010011011000110100101100011001000   000110010001101111011011010110000101101001011011100010000001110011011011110110011001110100011101110110000101110010011001010010000001101001011100110010000001100110011100100110010101100101001011000010000001100001011101000010000001101100011001010                         1100001011100110111010000100000011000010111010000100     000011001100110100101110010011100110   11101000010000001100111011011000110000101101110011000110110010100101110",
    text: "Most public domain software is free, at least at first glance."
  },
  {
    binary:
      "010101000110100     00110111101110011011001010010000001110111011010000110111100100000011001000110111 1001000000110111 00110111101110100001000000111010101101110011001000110010101110010011100110111010001100001011011100110010000100 00001010101011011100110100101111000001000000110000101110010011001010010000001100011011011110110111001100100011001010110110101101110011001010110  0100001000000111010001101111001000000111001001100101011010010110111001110110011001010110111001 110100 00100000011010010111010000101100001000000111000001101111011011110111001001101100011110010010111000100000001011010010110100100000010010000110010101101110011100100111100    10010000001010011011100000110010101101110011000110110010101110010",
    text:
      "Those who do not understand Unix are condemned to reinvent it, poorly. -- Henry Spencer"
  },
  {
    binary:
      "01000110010011110101001001010100 0101001001000001010011100010000001101001011100110010000001100110011011110111001000100000011100000110100101110000011001010010000001110011011101000111001001100101011100110111001100100000011001100111001001100101011000010110101101110011001000000110000101101110011001000010000001100011011100 1001111001011100110111010001100001011011000110110001101111011001110111001001100001011100000110100001111001001000000111011101100101011001010110111001101001011001010111001100101110",
    text: "FORTRAN is for pipe stress freaks and crystallography weenies."
  },
  {
    binary:
      "00101111 01100101 01100001 01110010 01110100 01101000 00100000 01101001 011100    11 00100000 00111001 00111000 00100101 00100000 01100110 01110101 01101100 01101  100 00100000 00101110 00101110 00101110 00100000 01110000 01101100 01100101 01100001 01110011 01100101 00100000 01100100 01100101 01101100 01100101 01110100 01100101 00100000 01100001 0110 1110 011110  01 01101111 01101110 01100101 00100000 01111001 01101111 01110101 00100000 01100011 01100001 01101110 00101110   ",
    text: "/earth is 98% full ... please delete anyone you can."
  }
];

var tests = 0;
var testErrors = [];

TestBlock.forEach((item, index) => {
  let binary = item.binary;
  // Removes spaces from the binary string
  binary = binary.replace(/\s+/g, "");
  // Add a space every 8 characters
  binary = binary.match(/.{1,8}/g).join(" ");
  // Remove spaces at the end of the generated string
  if (stringToBinary(item.text).trim() == binary) {
    console.log(`Test ${index}: PASSED`);
    tests++;
  } else {
    console.log(`Test ${index}: FAILED`);
    testErrors.push(index);
  }
});

if (tests == TestBlock.length) {
  console.log("All tests passed!");
} else {
  console.error(`Tests failed on: ${JSON.stringify(testErrors)}`);
}
